(()=>{"use strict";const e=function(e,t,o,a){var n=t.getContext("2d",{willReadFrequently:!0}),r=o[0],i=o[1],c=o[2],d=Math.sqrt(Math.pow(r,2)+Math.pow(i,2)+Math.pow(c,2)),s=!1;function l(){s=!0,u()}function u(){n.drawImage(e,0,0,e.videoWidth,e.videoHeight);for(var t=n.getImageData(0,0,e.videoWidth,e.videoHeight),o=0;o<t.data.length;o+=4){var l=t.data[o],v=t.data[o+1],h=t.data[o+2];Math.sqrt(Math.pow(l-r,2)+Math.pow(v-i,2)+Math.pow(h-c,2))<=a*d&&(t.data[o+3]=0)}n.putImageData(t,0,0),s&&window.requestAnimationFrame(u)}function v(){s=!1}e.addEventListener("loadeddata",(function(){t.width=e.videoWidth,t.height=e.videoHeight,t.style.width="".concat(e.width,"px"),t.style.height="auto",e.addEventListener("play",l),e.addEventListener("pause",v),e.addEventListener("ended",v)})),e.load()};var t={darkness:function(){document.documentElement.style.setProperty("--background-color","#000"),document.documentElement.style.setProperty("--foreground-color","#f9f0f0"),document.documentElement.style.setProperty("--badge-color","#5e5e5e"),document.documentElement.style.setProperty("--hover-color","#4e4e4e")}},o=[],a=/Android.+Firefox\//.test(navigator.userAgent),n=function(e,t){var o,a=(o={},document.querySelectorAll(".page").forEach((function(e){return o[e.dataset.route.toLowerCase()]=e})),o);function n(e,o){var n=a[e.toLowerCase()];n&&(Object.entries(a).forEach((function(t){var o=t[0],a=t[1];o!==e&&a.style.setProperty("display","none")})),n.style.removeProperty("display"),t&&t(n,o),window.scroll(0,0),history.pushState({},null,"".concat(e)))}function r(){var e=window.location.pathname;a[e]&&n(e,!0)}return window.addEventListener("popstate",r),e&&Object.values(a).forEach(e),r(),{navigateRoute:n}}((function(a){var n=a.querySelector("video[data-chroma-key]"),r=a.querySelector("canvas[data-chroma-key]"),i=a.dataset.transitionDelay,c=t[a.dataset.transitionFunction];n&&r&&(e(n,r,[0,255,0],.75),n.addEventListener("play",(function(){if(i){var e=setTimeout((function(){c&&window.location.pathname==a.dataset.route&&c()}),parseFloat(i));o.push(e)}})),n.addEventListener("ended",(function(){r.classList.remove("enter"),r.classList.add("exit"),c&&!i&&window.location.pathname==a.dataset.route&&c()})))}),(function(e,n){var r=e.querySelector("video[data-chroma-key]"),i=e.querySelector("canvas[data-chroma-key]"),c=(e.dataset.transitionDelay,t[e.dataset.transitionFunction]);document.documentElement.removeAttribute("style"),o.forEach(clearTimeout),i&&(i.classList.remove("exit"),i.classList.add("enter")),r&&(e.style.removeProperty("display"),r.currentTime=0,a||(n&&c?c():r.play()))})).navigateRoute,r=document.querySelector("nav"),i=document.querySelectorAll("nav a"),c=document.querySelectorAll("#posts, #writers, #about"),d=window.location.hash,s=0;function l(e){e.stopPropagation();var t=e.currentTarget;n(t.dataset.displayPage),i.forEach((function(e){return e.classList.remove("active")}))}function u(){c.forEach((function(e,t){window.scrollY>=e.offsetTop-10&&"/"===window.location.pathname&&i.forEach((function(e){return e.classList[e===i[t]?"add":"remove"]("active")}))}))}document.querySelectorAll(".card").forEach((function(e){return e.addEventListener("click",l)})),window.addEventListener("scroll",(function(){r.classList[window.scrollY>0?"add":"remove"]("shadow"),u(),r.classList[window.scrollY>90&&1===Math.sign(window.scrollY-s)?"add":"remove"]("minimize"),s=window.scrollY})),i.forEach((function(e){return e.addEventListener("click",(function(e){return t=e.currentTarget,i.forEach((function(e){return e.classList[e===t?"add":"remove"]("active")})),void n("/");var t}))})),i.forEach((function(e){return(e.hash===d||"#home"===e.hash&&0===d.length)&&e.classList.add("active")})),u();var v=document.querySelector("#special-button"),h=document.querySelector("#special-canvas"),m=document.querySelector("#special-video");e(m,h,[0,255,0],.7),v.addEventListener("click",(function(){return m.play()})),m.addEventListener("play",(function(){h.style.removeProperty("display")})),m.addEventListener("ended",(function(){h.style.display="none"}))})();