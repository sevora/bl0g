(()=>{"use strict";const e=function(e,t,o,n){var a=t.getContext("2d",{willReadFrequently:!0}),r=o[0],c=o[1],d=o[2],i=Math.sqrt(Math.pow(r,2)+Math.pow(c,2)+Math.pow(d,2)),s=!1;function l(){s=!0,u()}function u(){a.drawImage(e,0,0,e.videoWidth,e.videoHeight);for(var t=a.getImageData(0,0,e.videoWidth,e.videoHeight),o=0;o<t.data.length;o+=4){var l=t.data[o],m=t.data[o+1],y=t.data[o+2];Math.sqrt(Math.pow(l-r,2)+Math.pow(m-c,2)+Math.pow(y-d,2))<=n*i&&(t.data[o+3]=0)}a.putImageData(t,0,0),s&&window.requestAnimationFrame(u)}function m(){s=!1}e.addEventListener("loadeddata",(function(){t.width=e.videoWidth,t.height=e.videoHeight,t.style.width="".concat(e.width,"px"),t.style.height="auto",e.addEventListener("play",l),e.addEventListener("pause",m),e.addEventListener("ended",m)})),e.load()};var t=document.querySelector("#space"),o={darkness:function(){document.documentElement.style.setProperty("--background-color","#000"),document.documentElement.style.setProperty("--foreground-color","#f9f0f0"),document.documentElement.style.setProperty("--badge-color","#5e5e5e"),document.documentElement.style.setProperty("--hover-color","#4e4e4e")},stars:function(){document.documentElement.style.setProperty("--background-color","#000"),document.documentElement.style.setProperty("--foreground-color","#f9f0f0"),document.documentElement.style.setProperty("--badge-color","#5e5e5e"),document.documentElement.style.setProperty("--hover-color","#4e4e4e"),t.style.removeProperty("display")}},n=[],a=/Android.+Firefox\//.test(navigator.userAgent),r=document.querySelector("nav"),c=document.querySelectorAll("nav a"),d=document.querySelectorAll("#posts, #writers, #about"),i=window.location.hash,s=0,l=function(e,t){var o,n=(o={},document.querySelectorAll(".page").forEach((function(e){return o[e.dataset.route.toLowerCase()]=e})),o);function a(e,o){var a=n[e.toLowerCase()];a&&(Object.entries(n).forEach((function(t){var o=t[0],n=t[1];o!==e&&n.style.setProperty("display","none")})),a.style.removeProperty("display"),t&&t(a,o),window.scroll(0,0),history.pushState({},null,"".concat(e)))}function r(){var e=window.location.pathname;n[e]&&a(e,!0)}return window.addEventListener("popstate",r),e&&Object.values(n).forEach(e),r(),{navigateRoute:a}}((function(t){var a=t.querySelector("video[data-chroma-key]"),r=t.querySelector("canvas[data-chroma-key]"),c=t.dataset.transitionDelay,d=o[t.dataset.transitionFunction];a&&r&&(e(a,r,[0,255,0],.75),a.addEventListener("play",(function(){if(c){var e=setTimeout((function(){d&&window.location.pathname==t.dataset.route&&d()}),parseFloat(c));n.push(e)}})),a.addEventListener("ended",(function(){r.classList.remove("enter"),r.classList.add("exit"),d&&!c&&window.location.pathname==t.dataset.route&&d()})))}),(function(e,r){!function(e,r){var c=e.querySelector("video[data-chroma-key]"),d=e.querySelector("canvas[data-chroma-key]"),i=o[e.dataset.transitionFunction];document.documentElement.removeAttribute("style"),n.forEach(clearTimeout),"/go/jo"!=window.location.pathname&&t.style.setProperty("display","none"),d&&(d.classList.remove("exit"),d.classList.add("enter")),c&&(e.style.removeProperty("display"),c.currentTime=0,a||(r&&i?i():c.play()))}(e,r),m()})).navigateRoute;function u(e){e.stopPropagation();var t=e.currentTarget;l(t.dataset.displayPage),c.forEach((function(e){return e.classList.remove("active")}))}function m(){d.forEach((function(e,t){window.scrollY>=e.offsetTop-10&&"/"===window.location.pathname&&c.forEach((function(e){return e.classList[e===c[t]?"add":"remove"]("active")}))}))}document.querySelectorAll(".card").forEach((function(e){return e.addEventListener("click",u)})),window.addEventListener("scroll",(function(){r.classList[window.scrollY>0?"add":"remove"]("shadow"),m(),r.classList[window.scrollY>90&&1===Math.sign(window.scrollY-s)?"add":"remove"]("minimize"),s=window.scrollY})),c.forEach((function(e){return e.addEventListener("click",(function(e){return l("/")}))})),c.forEach((function(e){return(e.hash===i||"#home"===e.hash&&0===i.length)&&e.classList.add("active")})),m();var y=document.querySelector("#special-button"),v=document.querySelector("#special-canvas"),h=document.querySelector("#special-video");e(h,v,[0,255,0],.7),y.addEventListener("click",(function(){return h.play()})),h.addEventListener("play",(function(){v.style.removeProperty("display")})),h.addEventListener("ended",(function(){v.style.display="none"}))})();