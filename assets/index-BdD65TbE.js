(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();function x(e,o){const n=a();function a(){let r={};return document.querySelectorAll(".page").forEach(c=>r[c.dataset.route.toLowerCase()]=c),r}function t(r,c){const i=n[r.toLowerCase()];i&&(history.pushState({scrollY:window.scrollY},"",`#${r}`),Object.entries(n).forEach(([u,y])=>{u!==r&&y.style.setProperty("display","none")}),i.style.removeProperty("display"),o&&o(i,c),window.scroll(0,0))}function s(r){let{hash:c}=window.location;c=c.replace("#",""),n[c]&&t(c,!0),r!=null&&r.state&&(r!=null&&r.state.scrollY)&&window.scrollTo(0,r.state.scrollY)}return window.addEventListener("popstate",s),e&&Object.values(n).forEach(e),s(),{navigateRoute:t}}function q(e,o,n,a){const t=o.getContext("2d",{willReadFrequently:!0}),[s,r,c]=n,i=Math.sqrt(Math.pow(s,2)+Math.pow(r,2)+Math.pow(c,2));let u=!1;function y(){o.width=e.videoWidth,o.height=e.videoHeight,o.style.width=`${e.width}px`,o.style.height="auto",e.addEventListener("play",M),e.addEventListener("pause",E),e.addEventListener("ended",E)}function M(){u=!0,g()}function g(){t.drawImage(e,0,0,e.videoWidth,e.videoHeight);let l=t.getImageData(0,0,e.videoWidth,e.videoHeight);for(let d=0;d<l.data.length;d+=4){const F=l.data[d],Y=l.data[d+1],k=l.data[d+2];Math.sqrt(Math.pow(F-s,2)+Math.pow(Y-r,2)+Math.pow(k-c,2))<=a*i&&(l.data[d+3]=0)}t.putImageData(l,0,0),u&&window.requestAnimationFrame(g)}function E(){u=!1}e.addEventListener("loadeddata",y),e.load()}const S=document.querySelector("#space"),b={darkness:function(){document.documentElement.style.setProperty("--background-color","#000"),document.documentElement.style.setProperty("--foreground-color","#f9f0f0"),document.documentElement.style.setProperty("--badge-color","#5e5e5e"),document.documentElement.style.setProperty("--hover-color","#4e4e4e")},stars:function(){document.documentElement.style.setProperty("--background-color","#000"),document.documentElement.style.setProperty("--foreground-color","#f9f0f0"),document.documentElement.style.setProperty("--badge-color","#5e5e5e"),document.documentElement.style.setProperty("--hover-color","#4e4e4e"),S.style.removeProperty("display")}};let p=[];const C=/Android.+Firefox\//.test(navigator.userAgent);function O(e){const o=e.querySelector("video[data-chroma-key]"),n=e.querySelector("canvas[data-chroma-key]"),a=e.dataset.transitionDelay,t=b[e.dataset.transitionFunction];o&&n&&(q(o,n,[0,255,0],.75),o.addEventListener("play",function(){if(!a)return;const s=setTimeout(function(){t&&window.location.hash.replace("#","")==e.dataset.route&&t()},parseFloat(a));p.push(s)}),o.addEventListener("ended",function(){n.classList.remove("enter"),n.classList.add("exit"),t&&!a&&window.location.pathname==e.dataset.route&&t()}))}function R(e,o){const n=e.querySelector("video[data-chroma-key]"),a=e.querySelector("canvas[data-chroma-key]"),t=b[e.dataset.transitionFunction];document.documentElement.removeAttribute("style"),p.forEach(clearTimeout),p=[],window.location.pathname!="/go/jo"&&S.style.setProperty("display","none"),a&&(a.classList.remove("exit"),a.classList.add("enter")),n&&(e.style.removeProperty("display"),n.currentTime=0,C||(o&&t?t():n.play()))}const v=document.querySelector("nav"),f=document.querySelectorAll("nav a"),T=document.querySelectorAll("#posts, #writers, #about"),{hash:L}=window.location;let P=0;const{navigateRoute:A}=x(O,(e,o)=>{R(e,o),h()});function I(e){e.stopPropagation();const o=e.currentTarget;A(o.dataset.displayPage),f.forEach(n=>n.classList.remove("active"))}document.querySelectorAll(".card").forEach(e=>e.addEventListener("click",I));function h(){T.forEach((e,o)=>{window.scrollY>=e.offsetTop-10&&window.location.pathname==="/"&&f.forEach(n=>n.classList[n===f[o]?"add":"remove"]("active"))})}window.addEventListener("scroll",()=>{v.classList[window.scrollY>0?"add":"remove"]("shadow"),v.classList[window.scrollY>90&&Math.sign(window.scrollY-P)===1?"add":"remove"]("minimize"),h(),P=window.scrollY});f.forEach(e=>e.addEventListener("click",o=>A("/")));f.forEach(e=>(e.hash===L||e.hash==="#home"&&L.length===0)&&e.classList.add("active"));h();const N=document.querySelector("#special-button"),w=document.querySelector("#special-canvas"),m=document.querySelector("#special-video");q(m,w,[0,255,0],.7);N.addEventListener("click",()=>m.play());m.addEventListener("play",()=>{w.style.removeProperty("display")});m.addEventListener("ended",()=>{w.style.display="none"});
