(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();function x(e,o){const n=a();function a(){let r={};return document.querySelectorAll(".page").forEach(i=>r[i.dataset.route.toLowerCase()]=i),r}function t(r,i){const c=n[r.toLowerCase()];c&&(history.pushState({scrollY:window.scrollY},"",`#${r}`),Object.entries(n).forEach(([u,y])=>{u!==r&&y.style.setProperty("display","none")}),c.style.removeProperty("display"),o&&o(c,i),window.scroll(0,0))}function s(r){let{hash:i}=window.location;i=i.replace("#",""),n[i]&&t(i,!0),r!=null&&r.state&&(r!=null&&r.state.scrollY)&&window.scrollTo(0,r.state.scrollY)}return window.addEventListener("popstate",s),e&&Object.values(n).forEach(e),s(),{navigateRoute:t}}function S(e,o,n,a){const t=o.getContext("2d",{willReadFrequently:!0}),[s,r,i]=n,c=Math.sqrt(Math.pow(s,2)+Math.pow(r,2)+Math.pow(i,2));let u=!1;function y(){o.width=e.videoWidth,o.height=e.videoHeight,o.style.width=`${e.width}px`,o.style.height="auto",e.addEventListener("play",M),e.addEventListener("pause",v),e.addEventListener("ended",v)}function M(){u=!0,E()}function E(){t.drawImage(e,0,0,e.videoWidth,e.videoHeight);let l=t.getImageData(0,0,e.videoWidth,e.videoHeight);for(let d=0;d<l.data.length;d+=4){const F=l.data[d],Y=l.data[d+1],k=l.data[d+2];Math.sqrt(Math.pow(F-s,2)+Math.pow(Y-r,2)+Math.pow(k-i,2))<=a*c&&(l.data[d+3]=0)}t.putImageData(l,0,0),u&&window.requestAnimationFrame(E)}function v(){u=!1}e.addEventListener("loadeddata",y),e.load()}const b=document.querySelector("#space"),A={darkness:function(){document.documentElement.style.setProperty("--background-color","#000"),document.documentElement.style.setProperty("--foreground-color","#f9f0f0"),document.documentElement.style.setProperty("--badge-color","#5e5e5e"),document.documentElement.style.setProperty("--hover-color","#4e4e4e")},stars:function(){document.documentElement.style.setProperty("--background-color","#000"),document.documentElement.style.setProperty("--foreground-color","#f9f0f0"),document.documentElement.style.setProperty("--badge-color","#5e5e5e"),document.documentElement.style.setProperty("--hover-color","#4e4e4e"),b.style.removeProperty("display")}};let p=[];const C=/Android.+Firefox\//.test(navigator.userAgent);function O(e){const o=e.querySelector("video[data-chroma-key]"),n=e.querySelector("canvas[data-chroma-key]"),a=e.dataset.transitionDelay,t=A[e.dataset.transitionFunction];o&&n&&(S(o,n,[0,255,0],.75),o.addEventListener("play",function(){if(!a)return;const s=setTimeout(function(){t&&window.location.hash.replace("#","")==e.dataset.route&&t()},parseFloat(a));p.push(s)}),o.addEventListener("ended",function(){n.classList.remove("enter"),n.classList.add("exit"),t&&!a&&window.location.pathname==e.dataset.route&&t()}))}function R(e,o){const n=e.querySelector("video[data-chroma-key]"),a=e.querySelector("canvas[data-chroma-key]"),t=A[e.dataset.transitionFunction];document.documentElement.removeAttribute("style"),p.forEach(clearTimeout),p=[],window.location.pathname!="/go/jo"&&b.style.setProperty("display","none"),a&&(a.classList.remove("exit"),a.classList.add("enter")),n&&(e.style.removeProperty("display"),n.currentTime=0,C||(o&&t?t():n.play()))}const L=document.querySelector("nav"),f=document.querySelectorAll("nav a"),T=document.querySelectorAll("#posts, #writers, #about"),{hash:P}=window.location;let q=0;const{navigateRoute:h}=x(O,(e,o)=>{R(e,o),w()});function I(e){e.stopPropagation();const o=e.currentTarget;h(o.dataset.displayPage),f.forEach(n=>n.classList.remove("active"))}document.querySelectorAll(".card").forEach(e=>e.addEventListener("click",I));function w(){T.forEach((e,o)=>{window.scrollY>=e.offsetTop-10&&window.location.pathname==="/"&&f.forEach(n=>n.classList[n===f[o]?"add":"remove"]("active"))})}window.addEventListener("scroll",()=>{L.classList[window.scrollY>0?"add":"remove"]("shadow"),L.classList[window.scrollY>90&&Math.sign(window.scrollY-q)===1?"add":"remove"]("minimize"),w(),q=window.scrollY});f.forEach(e=>e.addEventListener("click",o=>h("/")));f.forEach(e=>(e.hash===P||e.hash==="#home"&&P.length===0)&&e.classList.add("active"));w();const N=document.querySelector("#special-button"),g=document.querySelector("#special-canvas"),m=document.querySelector("#special-video");S(m,g,[0,255,0],.7);N.addEventListener("click",()=>m.play());m.addEventListener("play",()=>{g.style.removeProperty("display")});m.addEventListener("ended",()=>{g.style.display="none"});window.addEventListener("popstate",()=>{let{hash:e}=window.location;e=e.replace("#",""),(["posts","writers","about"].includes(e)||e.length===0)&&h("/",!1),console.log(e)});
